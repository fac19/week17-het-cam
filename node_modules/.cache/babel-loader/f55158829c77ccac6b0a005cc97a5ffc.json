{"ast":null,"code":"var _jsxFileName = \"/home/hettiemcc/documents/fac/projects/teach-fish-frontend/src/components/missions/go/Go.js\";\nimport React from \"react\";\nimport { TextButton, ImageUploadButton } from \"../../global/buttons/Buttons\";\nimport Links from \"../../global/links/Links\";\nimport { FormContainer, FormInputWrapper, ImageUploadNotification, StyledIcon, UploadedImageDisplay, SubmitStep } from \"./Go.style\";\nimport TextArea from \"../../global/forms/textArea/TextArea\";\nimport Steps from \"../steps/Steps\";\nimport Paragraph from \"../../../components/global/paragraph/Paragraph\";\nimport Subheading from \"../../../components/global/subheading/Subheading\";\nimport tick from \"../../../img/tick.svg\";\nimport crissCross from \"../../../img/criss-cross.svg\";\n\nconst Go = props => {\n  const token = JSON.parse(localStorage.getItem(\"token\"));\n  const email = token ? token.email : \"\";\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [file, setUploadedFile] = React.useState(\"\");\n  const [form, setForm] = React.useState({\n    Email: email,\n    Task1: file,\n    Task2a: \"\",\n    Task2b: \"\",\n    Task2c: \"\"\n  });\n\n  const startOver = () => {\n    props.setMissionState(\"get\");\n    setUploadedFile(\"\");\n    setForm({\n      Email: email,\n      Task1: file,\n      Task2a: \"\",\n      Task2b: \"\",\n      Task2c: \"\"\n    });\n  };\n\n  const uploadImage = () => {\n    window.cloudinary.openUploadWidget({\n      cloudName: \"teach-a-man-to-fish\",\n      uploadPreset: \"TAMTF2020\",\n      sources: [\"local\", \"google_drive\", \"facebook\"],\n      cropping: true,\n      multiple: false,\n      defaultSource: \"local\",\n      styles: {\n        palette: {\n          window: \"#F5F5F5\",\n          sourceBg: \"#FFFFFF\",\n          windowBorder: \"#90a0b3\",\n          tabIcon: \"#0094c7\",\n          inactiveTabIcon: \"#69778A\",\n          menuIcons: \"#0094C7\",\n          link: \"#53ad9d\",\n          action: \"#8F5DA5\",\n          inProgress: \"#0194c7\",\n          complete: \"#53ad9d\",\n          error: \"#c43737\",\n          textDark: \"#000000\",\n          textLight: \"#FFFFFF\"\n        }\n      }\n    }, (error, result) => {\n      if (!error && result && result.event === \"success\") {\n        const url = result.info.url;\n        console.log(result);\n        setForm({ ...form,\n          Task1: url\n        });\n        setUploadedFile(url);\n      }\n    });\n  };\n\n  const [buttonState, setButtonState] = React.useState(true);\n\n  const handleChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setForm({ ...form,\n      [name]: value\n    });\n\n    if (activeStep === 1) {\n      if (form.Task2a !== \"\" && form.Task2b !== \"\" && form.Task2c !== \"\") {\n        setButtonState(false);\n      }\n    }\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    props.setMissionState(\"complete\");\n    const response = await fetch(\"../../../.netlify/functions/post-entries/post-entries.js\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(form)\n    });\n    await response.json();\n  }; // function for the stepper for Go Page\n\n\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Steps, {\n    activeStep: activeStep,\n    handleNext: handleNext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FormContainer, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, activeStep === 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Subheading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, \"Task 1\"), /*#__PURE__*/React.createElement(Paragraph, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, props.task1), /*#__PURE__*/React.createElement(ImageUploadButton, {\n    text: \"Upload your image\",\n    onClick: uploadImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(ImageUploadNotification, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, \"Image uploaded:\", \" \", file ? /*#__PURE__*/React.createElement(StyledIcon, {\n    src: tick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(StyledIcon, {\n    src: crissCross,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(TextButton, {\n    text: \"Go To Next Task\",\n    onClick: handleNext,\n    disabled: !file,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  })), activeStep === 1 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Subheading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, \"Task 2\"), /*#__PURE__*/React.createElement(Paragraph, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, props.task2), /*#__PURE__*/React.createElement(FormInputWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    name: \"Task2a\",\n    label: props.task2a,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(FormInputWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    name: \"Task2b\",\n    label: props.task2b,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(FormInputWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    name: \"Task2c\",\n    label: props.task2c,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(TextButton, {\n    disabled: buttonState,\n    text: \"Go to mission review\",\n    onClick: handleNext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  })), activeStep === 2 && /*#__PURE__*/React.createElement(SubmitStep, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Subheading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }, \"Task 1\"), /*#__PURE__*/React.createElement(UploadedImageDisplay, {\n    src: form.Task1,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Subheading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, \"Task 2\"), /*#__PURE__*/React.createElement(Paragraph, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, \"1. \", form.Task2a), /*#__PURE__*/React.createElement(Paragraph, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, \"2. \", form.Task2b), /*#__PURE__*/React.createElement(Paragraph, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, \"3. \", form.Task2c), /*#__PURE__*/React.createElement(TextButton, {\n    type: \"submit\",\n    text: \"Submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }, \"OR\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Links, {\n    onClick: startOver,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  }, \"Restart mission\"));\n};\n\nexport default Go;","map":{"version":3,"sources":["/home/hettiemcc/documents/fac/projects/teach-fish-frontend/src/components/missions/go/Go.js"],"names":["React","TextButton","ImageUploadButton","Links","FormContainer","FormInputWrapper","ImageUploadNotification","StyledIcon","UploadedImageDisplay","SubmitStep","TextArea","Steps","Paragraph","Subheading","Go","props","token","JSON","parse","localStorage","getItem","email","activeStep","setActiveStep","useState","file","setUploadedFile","form","setForm","Email","Task1","Task2a","Task2b","Task2c","startOver","setMissionState","uploadImage","window","cloudinary","openUploadWidget","cloudName","uploadPreset","sources","cropping","multiple","defaultSource","styles","palette","sourceBg","windowBorder","tabIcon","inactiveTabIcon","menuIcons","link","action","inProgress","complete","error","textDark","textLight","result","event","url","info","console","log","buttonState","setButtonState","handleChange","name","value","target","handleSubmit","preventDefault","response","fetch","method","headers","body","stringify","json","handleNext","prevActiveStep","task1","tick","crissCross","task2","task2a","task2b","task2c"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { TextButton, ImageUploadButton } from \"../../global/buttons/Buttons\";\nimport Links from \"../../global/links/Links\";\nimport {\n  FormContainer,\n  FormInputWrapper,\n  ImageUploadNotification,\n  StyledIcon,\n  UploadedImageDisplay,\n  SubmitStep,\n} from \"./Go.style\";\nimport TextArea from \"../../global/forms/textArea/TextArea\";\nimport Steps from \"../steps/Steps\";\nimport Paragraph from \"../../../components/global/paragraph/Paragraph\";\nimport Subheading from \"../../../components/global/subheading/Subheading\";\nimport tick from \"../../../img/tick.svg\";\nimport crissCross from \"../../../img/criss-cross.svg\";\n\nconst Go = (props) => {\n  const token = JSON.parse(localStorage.getItem(\"token\"));\n  const email = token ? token.email : \"\";\n\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [file, setUploadedFile] = React.useState(\"\");\n  const [form, setForm] = React.useState({\n    Email: email,\n    Task1: file,\n    Task2a: \"\",\n    Task2b: \"\",\n    Task2c: \"\",\n  });\n\n  const startOver = () => {\n    props.setMissionState(\"get\");\n    setUploadedFile(\"\");\n    setForm({\n      Email: email,\n      Task1: file,\n      Task2a: \"\",\n      Task2b: \"\",\n      Task2c: \"\",\n    });\n  };\n\n  const uploadImage = () => {\n    window.cloudinary.openUploadWidget(\n      {\n        cloudName: \"teach-a-man-to-fish\",\n        uploadPreset: \"TAMTF2020\",\n        sources: [\"local\", \"google_drive\", \"facebook\"],\n        cropping: true,\n        multiple: false,\n        defaultSource: \"local\",\n        styles: {\n          palette: {\n            window: \"#F5F5F5\",\n            sourceBg: \"#FFFFFF\",\n            windowBorder: \"#90a0b3\",\n            tabIcon: \"#0094c7\",\n            inactiveTabIcon: \"#69778A\",\n            menuIcons: \"#0094C7\",\n            link: \"#53ad9d\",\n            action: \"#8F5DA5\",\n            inProgress: \"#0194c7\",\n            complete: \"#53ad9d\",\n            error: \"#c43737\",\n            textDark: \"#000000\",\n            textLight: \"#FFFFFF\",\n          },\n        },\n      },\n\n      (error, result) => {\n        if (!error && result && result.event === \"success\") {\n          const url = result.info.url;\n          console.log(result);\n          setForm({ ...form, Task1: url });\n          setUploadedFile(url);\n        }\n      },\n    );\n  };\n  const [buttonState, setButtonState] = React.useState(true);\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setForm({ ...form, [name]: value });\n    if (activeStep === 1) {\n      if (form.Task2a !== \"\" && form.Task2b !== \"\" && form.Task2c !== \"\") {\n        setButtonState(false);\n      }\n    }\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    props.setMissionState(\"complete\");\n\n    const response = await fetch(\n      \"../../../.netlify/functions/post-entries/post-entries.js\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n        },\n        body: JSON.stringify(form),\n      },\n    );\n\n    await response.json();\n  };\n\n  // function for the stepper for Go Page\n\n  const handleNext = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  };\n\n  return (\n    <>\n      <Steps activeStep={activeStep} handleNext={handleNext} />\n      <FormContainer onSubmit={handleSubmit}>\n        {activeStep === 0 && (\n          <>\n            <Subheading>Task 1</Subheading>\n            <Paragraph>{props.task1}</Paragraph>\n\n            <ImageUploadButton\n              text={\"Upload your image\"}\n              onClick={uploadImage}\n            />\n            <ImageUploadNotification>\n              Image uploaded:{\" \"}\n              {file ? (\n                <StyledIcon src={tick} />\n              ) : (\n                <StyledIcon src={crissCross} />\n              )}\n            </ImageUploadNotification>\n            <TextButton\n              text={\"Go To Next Task\"}\n              onClick={handleNext}\n              disabled={!file}\n            />\n          </>\n        )}\n        {activeStep === 1 && (\n          <>\n            <Subheading>Task 2</Subheading>\n            <Paragraph>{props.task2}</Paragraph>\n            <FormInputWrapper>\n              <TextArea\n                name={\"Task2a\"}\n                label={props.task2a}\n                onChange={handleChange}\n              />\n            </FormInputWrapper>\n            <FormInputWrapper>\n              <TextArea\n                name={\"Task2b\"}\n                label={props.task2b}\n                onChange={handleChange}\n              />\n            </FormInputWrapper>\n            <FormInputWrapper>\n              <TextArea\n                name={\"Task2c\"}\n                label={props.task2c}\n                onChange={handleChange}\n              />\n            </FormInputWrapper>\n            <TextButton\n              disabled={buttonState}\n              text={\"Go to mission review\"}\n              onClick={handleNext}\n            />\n          </>\n        )}\n        {activeStep === 2 && (\n          <SubmitStep>\n            <Subheading>Task 1</Subheading>\n            <UploadedImageDisplay src={form.Task1} alt=\"\" />\n            <Subheading>Task 2</Subheading>\n            <Paragraph>1. {form.Task2a}</Paragraph>\n            <Paragraph>2. {form.Task2b}</Paragraph>\n            <Paragraph>3. {form.Task2c}</Paragraph>\n            <TextButton type={\"submit\"} text={\"Submit\"} />\n            <br />\n            <p>OR</p>\n            <br />\n          </SubmitStep>\n        )}\n      </FormContainer>\n      <Links onClick={startOver}>Restart mission</Links>\n    </>\n  );\n};\n\nexport default Go;\n"]},"metadata":{},"sourceType":"module"}