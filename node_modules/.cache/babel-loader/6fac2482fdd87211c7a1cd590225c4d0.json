{"ast":null,"code":"var _jsxFileName = \"/home/hettiemcc/documents/fac/projects/teach-fish-frontend/src/App.js\";\nimport React from \"react\";\nimport { Redirect, BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Landing from \"./pages/landingPage/Landing\";\nimport About from \"./pages/aboutPage/About\";\nimport Login from \"./pages/loginPage/Login\";\nimport SignUp from \"./pages/signUpPage/SignUp\";\nimport MyMissions from \"./pages/myMissionsPage/MyMissions\";\nimport MyProfile from \"./pages/myProfilePage/MyProfile\";\nimport Mission from \"./pages/missionPage/Mission\";\nimport netlifyIdentity from \"netlify-identity-widget\";\nimport auth from \"../src/utils/auth\";\nimport { loginUser, logoutUser } from \"../src/utils/identityActions\";\nimport \"./App.css\";\nimport { AppContextProvider } from \"./utils/AppContext\";\n\nconst App = () => {\n  const [userInfo, setUserInfo] = React.useState();\n  React.useEffect(() => {\n    // const user = localStorage.getItem(\"gotrue.user\");\n    const user = netlifyIdentity.currentUser();\n    console.log(\"user \", user); // console.log(\"app => user\", user.token);\n    // console.log(JSON.parse(user));\n\n    if (user) {\n      setUserInfo({\n        user: user\n      });\n      console.log(userInfo);\n    } else {\n      loginUser();\n    }\n\n    netlifyIdentity.on(\"login\", user => setUserInfo({\n      user\n    }, loginUser()));\n    netlifyIdentity.on(\"logout\", user => setUserInfo({\n      user: null\n    }, logoutUser()));\n  }, []);\n  return /*#__PURE__*/React.createElement(AppContextProvider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: () => /*#__PURE__*/React.createElement(Landing, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 50\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/about\",\n    component: () => /*#__PURE__*/React.createElement(About, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 49\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signup\",\n    component: () => /*#__PURE__*/React.createElement(SignUp, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 50\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    component: () => /*#__PURE__*/React.createElement(Login, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 49\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/my-profile\",\n    component: auth(MyProfile, netlifyIdentity.currentUser()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/my-missions\",\n    component: () => /*#__PURE__*/React.createElement(MyMissions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 55\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/mission/:number\",\n    component: () => /*#__PURE__*/React.createElement(Mission, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 59\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }))));\n};\n\nconst netlifyAuth = {\n  isAuthenticated: false,\n  user: null,\n\n  authenticate(callback) {\n    this.isAuthenticated = true;\n    netlifyIdentity.open();\n    netlifyIdentity.on(\"login\", user => {\n      this.user = user;\n      callback(user);\n    });\n  },\n\n  signout(callback) {\n    this.isAuthenticated = false;\n    netlifyIdentity.logout();\n    netlifyIdentity.on(\"logout\", () => {\n      this.user = null;\n      callback();\n    });\n  }\n\n};\n\nfunction PrivateRoute({\n  component: Component,\n  ...rest\n}) {\n  return /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    render: props => netlifyAuth.isAuthenticated ? /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    })) : /*#__PURE__*/React.createElement(Redirect, {\n      to: {\n        pathname: \"/login\",\n        state: {\n          from: props.location\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/hettiemcc/documents/fac/projects/teach-fish-frontend/src/App.js"],"names":["React","Redirect","BrowserRouter","Router","Switch","Route","Landing","About","Login","SignUp","MyMissions","MyProfile","Mission","netlifyIdentity","auth","loginUser","logoutUser","AppContextProvider","App","userInfo","setUserInfo","useState","useEffect","user","currentUser","console","log","on","netlifyAuth","isAuthenticated","authenticate","callback","open","signout","logout","PrivateRoute","component","Component","rest","props","pathname","state","from","location"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  Redirect,\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport Landing from \"./pages/landingPage/Landing\";\nimport About from \"./pages/aboutPage/About\";\nimport Login from \"./pages/loginPage/Login\";\nimport SignUp from \"./pages/signUpPage/SignUp\";\nimport MyMissions from \"./pages/myMissionsPage/MyMissions\";\nimport MyProfile from \"./pages/myProfilePage/MyProfile\";\nimport Mission from \"./pages/missionPage/Mission\";\n\nimport netlifyIdentity from \"netlify-identity-widget\";\nimport auth from \"../src/utils/auth\";\nimport { loginUser, logoutUser } from \"../src/utils/identityActions\";\n\nimport \"./App.css\";\nimport { AppContextProvider } from \"./utils/AppContext\";\n\nconst App = () => {\n  const [userInfo, setUserInfo] = React.useState();\n\n  React.useEffect(() => {\n    // const user = localStorage.getItem(\"gotrue.user\");\n    const user = netlifyIdentity.currentUser();\n    console.log(\"user \", user);\n    // console.log(\"app => user\", user.token);\n    // console.log(JSON.parse(user));\n\n    if (user) {\n      setUserInfo({ user: user });\n      console.log(userInfo);\n    } else {\n      loginUser();\n    }\n\n    netlifyIdentity.on(\"login\", (user) => setUserInfo({ user }, loginUser()));\n\n    netlifyIdentity.on(\"logout\", (user) =>\n      setUserInfo({ user: null }, logoutUser()),\n    );\n  }, []);\n\n  return (\n    <AppContextProvider>\n      <Router>\n        <Switch>\n          <Route exact path=\"/\" component={() => <Landing />} />\n          <Route path=\"/about\" component={() => <About />} />\n          <Route path=\"/signup\" component={() => <SignUp />} />\n          <Route path=\"/login\" component={() => <Login />} />\n\n          {/* <Route path=\"/my-profile\" component={auth(MyProfile, userInfo)} /> */}\n          <Route\n            path=\"/my-profile\"\n            component={auth(MyProfile, netlifyIdentity.currentUser())}\n          />\n\n          <Route path=\"/my-missions\" component={() => <MyMissions />} />\n          <Route path=\"/mission/:number\" component={() => <Mission />} />\n        </Switch>\n      </Router>\n    </AppContextProvider>\n  );\n};\n\nconst netlifyAuth = {\n  isAuthenticated: false,\n  user: null,\n  authenticate(callback) {\n    this.isAuthenticated = true;\n    netlifyIdentity.open();\n    netlifyIdentity.on(\"login\", (user) => {\n      this.user = user;\n      callback(user);\n    });\n  },\n  signout(callback) {\n    this.isAuthenticated = false;\n    netlifyIdentity.logout();\n    netlifyIdentity.on(\"logout\", () => {\n      this.user = null;\n      callback();\n    });\n  },\n};\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n  return (\n    <Route\n      {...rest}\n      render={(props) =>\n        netlifyAuth.isAuthenticated ? (\n          <Component {...props} />\n        ) : (\n          <Redirect\n            to={{\n              pathname: \"/login\",\n              state: { from: props.location },\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}