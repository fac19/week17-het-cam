{"ast":null,"code":"var Airtable = require(\"airtable\");\n\nconst {\n  AIRTABLE_API_KEY,\n  AIRTABLE_BASE_ID,\n  AIRTABLE_API_URL\n} = process.env;\nvar base = new Airtable({\n  apiKey: AIRTABLE_API_KEY\n}).base(AIRTABLE_BASE_ID);\nexport default function fetchStudentRecords(email, changeStateFunction) {\n  base(\"Students\").select({\n    filterByFormula: `{Email} = \"${email}\"`\n  }).eachPage(function page(records, fetchNextPage) {\n    // This function (`page`) will get called for each page of records.\n    records.forEach(function (record) {\n      console.log(\"Retrieved\", record.get(\"Email\"));\n      let user = record.get(\"Email\");\n      changeStateFunction(user);\n      return user;\n    }); // // To fetch the next page of records, call `fetchNextPage`.\n    // // If there are more records, `page` will get called again.\n    // // If there are no more records, `done` will get called.\n    // fetchNextPage();\n  }, function done(err) {\n    if (err) {\n      console.error(err);\n      return;\n    }\n  });\n}","map":{"version":3,"sources":["/home/hettiemcc/documents/fac/projects/teach-fish-frontend/src/utils/fetch-data.js"],"names":["Airtable","require","AIRTABLE_API_KEY","AIRTABLE_BASE_ID","AIRTABLE_API_URL","process","env","base","apiKey","fetchStudentRecords","email","changeStateFunction","select","filterByFormula","eachPage","page","records","fetchNextPage","forEach","record","console","log","get","user","done","err","error"],"mappings":"AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AAEA,MAAM;AAAEC,EAAAA,gBAAF;AAAoBC,EAAAA,gBAApB;AAAsCC,EAAAA;AAAtC,IAA2DC,OAAO,CAACC,GAAzE;AACA,IAAIC,IAAI,GAAG,IAAIP,QAAJ,CAAa;AAAEQ,EAAAA,MAAM,EAAEN;AAAV,CAAb,EAA2CK,IAA3C,CAAgDJ,gBAAhD,CAAX;AAEA,eAAe,SAASM,mBAAT,CAA6BC,KAA7B,EAAoCC,mBAApC,EAAyD;AACtEJ,EAAAA,IAAI,CAAC,UAAD,CAAJ,CACGK,MADH,CACU;AACNC,IAAAA,eAAe,EAAG,cAAaH,KAAM;AAD/B,GADV,EAIGI,QAJH,CAKI,SAASC,IAAT,CAAcC,OAAd,EAAuBC,aAAvB,EAAsC;AACpC;AAEAD,IAAAA,OAAO,CAACE,OAAR,CAAgB,UAAUC,MAAV,EAAkB;AAChCC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBF,MAAM,CAACG,GAAP,CAAW,OAAX,CAAzB;AACA,UAAIC,IAAI,GAAGJ,MAAM,CAACG,GAAP,CAAW,OAAX,CAAX;AACAX,MAAAA,mBAAmB,CAACY,IAAD,CAAnB;AACA,aAAOA,IAAP;AACD,KALD,EAHoC,CAUpC;AACA;AACA;AACA;AACD,GAnBL,EAoBI,SAASC,IAAT,CAAcC,GAAd,EAAmB;AACjB,QAAIA,GAAJ,EAAS;AACPL,MAAAA,OAAO,CAACM,KAAR,CAAcD,GAAd;AACA;AACD;AACF,GAzBL;AA2BD","sourcesContent":["var Airtable = require(\"airtable\");\n\nconst { AIRTABLE_API_KEY, AIRTABLE_BASE_ID, AIRTABLE_API_URL } = process.env;\nvar base = new Airtable({ apiKey: AIRTABLE_API_KEY }).base(AIRTABLE_BASE_ID);\n\nexport default function fetchStudentRecords(email, changeStateFunction) {\n  base(\"Students\")\n    .select({\n      filterByFormula: `{Email} = \"${email}\"`,\n    })\n    .eachPage(\n      function page(records, fetchNextPage) {\n        // This function (`page`) will get called for each page of records.\n\n        records.forEach(function (record) {\n          console.log(\"Retrieved\", record.get(\"Email\"));\n          let user = record.get(\"Email\");\n          changeStateFunction(user);\n          return user;\n        });\n\n        // // To fetch the next page of records, call `fetchNextPage`.\n        // // If there are more records, `page` will get called again.\n        // // If there are no more records, `done` will get called.\n        // fetchNextPage();\n      },\n      function done(err) {\n        if (err) {\n          console.error(err);\n          return;\n        }\n      },\n    );\n}\n"]},"metadata":{},"sourceType":"module"}