{"ast":null,"code":"var _jsxFileName = \"/home/hettiemcc/documents/fac/projects/teach-fish-frontend/src/App.js\";\nimport React from \"react\";\nimport { Redirect, BrowserRouter as Router, Switch, Route } from \"react-router-dom\"; // import Navbar from \"./components/global/navbar/Navbar\";\n\nimport Landing from \"./pages/landingPage/Landing\";\nimport About from \"./pages/aboutPage/About\";\nimport Login from \"./pages/loginPage/Login\";\nimport SignUp from \"./pages/signUpPage/SignUp\";\nimport MyMissions from \"./pages/myMissionsPage/MyMissions\";\nimport MyProfile from \"./pages/myProfilePage/MyProfile\";\nimport Mission from \"./pages/missionPage/Mission\";\nimport AppContainer from \"./App.style\";\nimport netlifyIdentity from \"netlify-identity-widget\";\nimport auth from \"../src/utils/auth\";\nimport { loginUser, logoutUser } from \"../src/utils/identityActions\";\nimport \"./App.css\";\nimport { AppContextProvider } from \"./utils/AppContext\";\n\nconst App = () => {\n  const [userInfo, setUserInfo] = React.useState({});\n  React.useEffect(() => {\n    // const user = localStorage.getItem(\"gotrue.user\");\n    const user = netlifyIdentity.currentUser(); // console.log(\"app => user\", user.token);\n    // console.log(JSON.parse(user));\n\n    if (user) {\n      setUserInfo({\n        user: user\n      });\n    } else {\n      loginUser();\n    }\n\n    netlifyIdentity.on(\"login\", user => setUserInfo({\n      user\n    }, loginUser()));\n    netlifyIdentity.on(\"logout\", user => setUserInfo({\n      user: null\n    }, logoutUser()));\n  }, [userInfo]);\n  return /*#__PURE__*/React.createElement(AppContextProvider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AppContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: () => /*#__PURE__*/React.createElement(Landing, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 52\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/about\",\n    component: () => /*#__PURE__*/React.createElement(About, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 51\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signup\",\n    component: () => /*#__PURE__*/React.createElement(SignUp, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 52\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    component: () => /*#__PURE__*/React.createElement(Login, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 51\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/my-profile\",\n    component: auth(MyProfile, netlifyIdentity.currentUser()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/my-missions\",\n    component: auth(MyMissions, netlifyIdentity.currentUser()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/mission/:number\",\n    component: () => /*#__PURE__*/React.createElement(Mission, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 61\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  })))));\n}; // const netlifyAuth = {\n//   isAuthenticated: false,\n//   user: null,\n//   authenticate(callback) {\n//     this.isAuthenticated = true;\n//     netlifyIdentity.open();\n//     netlifyIdentity.on(\"login\", (user) => {\n//       this.user = user;\n//       callback(user);\n//     });\n//   },\n//   signout(callback) {\n//     this.isAuthenticated = false;\n//     netlifyIdentity.logout();\n//     netlifyIdentity.on(\"logout\", () => {\n//       this.user = null;\n//       callback();\n//     });\n//   },\n// };\n// function PrivateRoute({ component: Component, ...rest }) {\n//   return (\n//     <Route\n//       {...rest}\n//       render={(props) =>\n//         netlifyAuth.isAuthenticated ? (\n//           <Component {...props} />\n//         ) : (\n//           <Redirect\n//             to={{\n//               pathname: \"/login\",\n//               state: { from: props.location },\n//             }}\n//           />\n//         )\n//       }\n//     />\n//   );\n// }\n\n\nexport default App;","map":{"version":3,"sources":["/home/hettiemcc/documents/fac/projects/teach-fish-frontend/src/App.js"],"names":["React","Redirect","BrowserRouter","Router","Switch","Route","Landing","About","Login","SignUp","MyMissions","MyProfile","Mission","AppContainer","netlifyIdentity","auth","loginUser","logoutUser","AppContextProvider","App","userInfo","setUserInfo","useState","useEffect","user","currentUser","on"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  Redirect,\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n// import Navbar from \"./components/global/navbar/Navbar\";\nimport Landing from \"./pages/landingPage/Landing\";\nimport About from \"./pages/aboutPage/About\";\nimport Login from \"./pages/loginPage/Login\";\nimport SignUp from \"./pages/signUpPage/SignUp\";\nimport MyMissions from \"./pages/myMissionsPage/MyMissions\";\nimport MyProfile from \"./pages/myProfilePage/MyProfile\";\nimport Mission from \"./pages/missionPage/Mission\";\nimport AppContainer from \"./App.style\";\n\nimport netlifyIdentity from \"netlify-identity-widget\";\nimport auth from \"../src/utils/auth\";\nimport { loginUser, logoutUser } from \"../src/utils/identityActions\";\n\nimport \"./App.css\";\nimport { AppContextProvider } from \"./utils/AppContext\";\n\nconst App = () => {\n  const [userInfo, setUserInfo] = React.useState({});\n\n  React.useEffect(() => {\n    // const user = localStorage.getItem(\"gotrue.user\");\n    const user = netlifyIdentity.currentUser();\n    // console.log(\"app => user\", user.token);\n    // console.log(JSON.parse(user));\n\n    if (user) {\n      setUserInfo({ user: user });\n    } else {\n      loginUser();\n    }\n\n    netlifyIdentity.on(\"login\", (user) => setUserInfo({ user }, loginUser()));\n\n    netlifyIdentity.on(\"logout\", (user) =>\n      setUserInfo({ user: null }, logoutUser()),\n    );\n  }, [userInfo]);\n\n  return (\n    <AppContextProvider>\n      <AppContainer>\n        <Router>\n          <Switch>\n            <Route exact path=\"/\" component={() => <Landing />} />\n            <Route path=\"/about\" component={() => <About />} />\n            <Route path=\"/signup\" component={() => <SignUp />} />\n            <Route path=\"/login\" component={() => <Login />} />\n            <Route path=\"/logout\" />\n            {/* <Route path=\"/my-profile\" component={auth(MyProfile, userInfo)} /> */}\n            <Route\n              path=\"/my-profile\"\n              component={auth(MyProfile, netlifyIdentity.currentUser())}\n            />\n            <Route\n              path=\"/my-missions\"\n              component={auth(MyMissions, netlifyIdentity.currentUser())}\n            />\n            {/* <Route path=\"/my-missions\" component={() => <MyMissions />} /> */}\n            <Route path=\"/mission/:number\" component={() => <Mission />} />\n          </Switch>\n        </Router>\n      </AppContainer>\n    </AppContextProvider>\n  );\n};\n\n// const netlifyAuth = {\n//   isAuthenticated: false,\n//   user: null,\n//   authenticate(callback) {\n//     this.isAuthenticated = true;\n//     netlifyIdentity.open();\n//     netlifyIdentity.on(\"login\", (user) => {\n//       this.user = user;\n//       callback(user);\n//     });\n//   },\n//   signout(callback) {\n//     this.isAuthenticated = false;\n//     netlifyIdentity.logout();\n//     netlifyIdentity.on(\"logout\", () => {\n//       this.user = null;\n//       callback();\n//     });\n//   },\n// };\n\n// function PrivateRoute({ component: Component, ...rest }) {\n//   return (\n//     <Route\n//       {...rest}\n//       render={(props) =>\n//         netlifyAuth.isAuthenticated ? (\n//           <Component {...props} />\n//         ) : (\n//           <Redirect\n//             to={{\n//               pathname: \"/login\",\n//               state: { from: props.location },\n//             }}\n//           />\n//         )\n//       }\n//     />\n//   );\n// }\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}